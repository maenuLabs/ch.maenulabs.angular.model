/**
 * ch.maenulabs.angular.model v0.1.0
 * built on 29.10.2014
 * Copyright 2014 Manuel Leuenberger
 * licenced under MIT, see LICENSE.txt
 */
angular.module("ch.maenulabs.angular.model",[]),angular.module("ch.maenulabs.angular.model").factory("ch.maenulabs.angular.model.AbstractModel",["$http",function(t){var n=ch.maenulabs.validation.Validation;return new ch.maenulabs.type.Type(Object,{initialize:function(t){angular.extend(this,t||{}),this.validation=this.validation||new n},hasErrors:function(){return this.validation.hasErrors(this)},getErrors:function(){return this.validation.getErrors(this)},hasError:function(t){var n=this.validation.getErrors(this);return n[t]&&n[t].length>0},getError:function(t){return this.validation.getErrors(this)[t]||[]},canBeCreated:function(){throw Error("not implemented")},canBeRead:function(){throw Error("not implemented")},canBeUpdated:function(){throw Error("not implemented")},canBeRemoved:function(){throw Error("not implemented")},create:function(n,r){return n=n||angular.noop,r=r||angular.noop,t({url:this.getBasePath(),method:"POST",data:this.toJson()}).success(angular.bind(this,function(t){this.fromJson(t),n.apply(this,arguments)})).error(r),this},read:function(n,r){return n=n||angular.noop,r=r||angular.noop,t({url:this.getBasePath()+"/"+this.id,method:"GET"}).success(angular.bind(this,function(t){this.fromJson(t),n.apply(this,arguments)})).error(r),this},update:function(n,r){return n=n||angular.noop,r=r||angular.noop,t({url:this.getBasePath()+"/"+this.id,method:"PUT",data:this.toJson()}).success(n).error(r),this},remove:function(n,r){return n=n||angular.noop,r=r||angular.noop,t({url:this.getBasePath()+"/"+this.id,method:"DELETE"}).success(angular.bind(this,function(){this.id=null,n.apply(this,arguments)})).error(r),this},search:function(n,r){n=n||angular.noop,r=r||angular.noop;var a=[];return t({url:this.getSearchPath(),method:"GET"}).success(angular.bind(this,function(t){for(var r=angular.fromJson(t),o=0;r.length>o;o+=1)a.push(this.type.fromJson(r[o]));n.apply(this,arguments)})).error(r),a},toJson:function(){return angular.toJson(this.toSerializable())},fromJson:function(t){this.fromSerializable(angular.fromJson(t))},toSerializable:function(){return{id:this.id}},fromSerializable:function(t){this.id=t.id},getBasePath:function(){throw Error("not implemented")},getSearchPath:function(){throw Error("not implemented")}},{fromJson:function(t){var n=new this;return n.fromJson(t),n},fromSerializable:function(t){var n=new this;return n.fromSerializable(t),n}})}]);