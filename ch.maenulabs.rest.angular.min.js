/**
 * ch.maenulabs.rest.angular v0.1.0
 * built on 06.04.2015
 * Copyright 2015 Manuel Leuenberger
 * licenced under MIT, see LICENSE.txt
 */
angular.module("ch.maenulabs.rest.angular",["ch.maenulabs.rest.angular.resource"]),angular.module("ch.maenulabs.rest.angular.resource",[]),angular.module("ch.maenulabs.rest.angular.resource").factory("ch.maenulabs.rest.angular.resource.AbstractResource",["$http",function(r){var n=ch.maenulabs.validation.Validation;return new ch.maenulabs.type.Type(Object,{initialize:function(r){angular.extend(this,r||{}),this.validation=this.validation||new n},hasErrors:function(){return this.validation.hasErrors(this)},getErrors:function(){return this.validation.getErrors(this)},hasError:function(r){var n=this.validation.getErrors(this);return n[r]&&n[r].length>0},getError:function(r){return this.validation.getErrors(this)[r]||[]},create:function(n,i){return n=n||angular.noop,i=i||angular.noop,r({url:this.getBaseUri(),method:"POST",data:this.serialize()}).success(angular.bind(this,function(r,i,t){this.uri=t("location"),n.apply(this,arguments)})).error(i),this},read:function(n,i){return n=n||angular.noop,i=i||angular.noop,r({url:this.uri,method:"GET"}).success(angular.bind(this,function(r){this.deserialize(r),n.apply(this,arguments)})).error(i),this},update:function(n,i){return n=n||angular.noop,i=i||angular.noop,r({url:this.uri,method:"PUT",data:this.serialize()}).success(n).error(i),this},remove:function(n,i){return n=n||angular.noop,i=i||angular.noop,r({url:this.uri,method:"DELETE"}).success(angular.bind(this,function(){this.uri=null,n.apply(this,arguments)})).error(i),this},search:function(n,i){n=n||angular.noop,i=i||angular.noop;var t=[];return r({url:this.getBaseUri(),method:"GET"}).success(angular.bind(this,function(r){for(var i=angular.fromJson(r),a=0;i.length>a;a+=1)t.push(this.type.desimplify(i[a]));n.apply(this,arguments)})).error(i),t},serialize:function(){return angular.toJson(this.simplify())},deserialize:function(r){this.desimplify(angular.fromJson(r))},simplify:function(){return{uri:this.uri}},desimplify:function(r){this.uri=r.uri},getBaseUri:function(){throw Error("not implemented")}},{deserialize:function(r){var n=new this;return n.deserialize(r),n},desimplify:function(r){var n=new this;return n.desimplify(r),n}})}]);