/**
 * ch.maenulabs.rest.angular v0.1.0
 * built on 10.02.2015
 * Copyright 2015 Manuel Leuenberger
 * licenced under MIT, see LICENSE.txt
 */
angular.module("ch.maenulabs.rest.angular",[]),angular.module("ch.maenulabs.rest.angular").factory("ch.maenulabs.rest.angular.AbstractModel",["$http",function(t){var r=ch.maenulabs.validation.Validation;return new ch.maenulabs.type.Type(Object,{initialize:function(t){angular.extend(this,t||{}),this.validation=this.validation||new r},hasErrors:function(){return this.validation.hasErrors(this)},getErrors:function(){return this.validation.getErrors(this)},hasError:function(t){var r=this.validation.getErrors(this);return r[t]&&r[t].length>0},getError:function(t){return this.validation.getErrors(this)[t]||[]},canBeCreated:function(){throw Error("not implemented")},canBeRead:function(){throw Error("not implemented")},canBeUpdated:function(){throw Error("not implemented")},canBeRemoved:function(){throw Error("not implemented")},create:function(r,n){return r=r||angular.noop,n=n||angular.noop,t({url:this.getBasePath(),method:"POST",data:this.toJson()}).success(angular.bind(this,function(t){this.fromJson(t),r.apply(this,arguments)})).error(n),this},read:function(r,n){return r=r||angular.noop,n=n||angular.noop,t({url:this.getBasePath()+"/"+this.id,method:"GET"}).success(angular.bind(this,function(t){this.fromJson(t),r.apply(this,arguments)})).error(n),this},update:function(r,n){return r=r||angular.noop,n=n||angular.noop,t({url:this.getBasePath()+"/"+this.id,method:"PUT",data:this.toJson()}).success(r).error(n),this},remove:function(r,n){return r=r||angular.noop,n=n||angular.noop,t({url:this.getBasePath()+"/"+this.id,method:"DELETE"}).success(angular.bind(this,function(){this.id=null,r.apply(this,arguments)})).error(n),this},search:function(r,n){r=r||angular.noop,n=n||angular.noop;var a=[];return t({url:this.getSearchPath(),method:"GET"}).success(angular.bind(this,function(t){for(var n=angular.fromJson(t),o=0;n.length>o;o+=1)a.push(this.type.fromJson(n[o]));r.apply(this,arguments)})).error(n),a},toJson:function(){return angular.toJson(this.toSerializable())},fromJson:function(t){this.fromSerializable(angular.fromJson(t))},toSerializable:function(){return{id:this.id}},fromSerializable:function(t){this.id=t.id},getBasePath:function(){throw Error("not implemented")},getSearchPath:function(){throw Error("not implemented")}},{fromJson:function(t){var r=new this;return r.fromJson(t),r},fromSerializable:function(t){var r=new this;return r.fromSerializable(t),r}})}]);