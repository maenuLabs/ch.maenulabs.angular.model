/**
 * ch.maenulabs.rest.angular v0.1.0
 * built on 01.04.2015
 * Copyright 2015 Manuel Leuenberger
 * licenced under MIT, see LICENSE.txt
 */
angular.module("ch.maenulabs.rest.angular",["ch.maenulabs.rest.angular.resource"]),angular.module("ch.maenulabs.rest.angular.resource",[]),angular.module("ch.maenulabs.rest.angular.resource").factory("ch.maenulabs.rest.angular.resource.AbstractResource",["$http",function(r){var n=ch.maenulabs.validation.Validation;return new ch.maenulabs.type.Type(Object,{initialize:function(r){angular.extend(this,r||{}),this.validation=this.validation||new n},hasErrors:function(){return this.validation.hasErrors(this)},getErrors:function(){return this.validation.getErrors(this)},hasError:function(r){var n=this.validation.getErrors(this);return n[r]&&n[r].length>0},getError:function(r){return this.validation.getErrors(this)[r]||[]},create:function(n,t){return n=n||angular.noop,t=t||angular.noop,r({url:this.getBaseUri(),method:"POST",data:this.toJson()}).success(angular.bind(this,function(r,t,a){this.uri=a("location"),n.apply(this,arguments)})).error(t),this},read:function(n,t){return n=n||angular.noop,t=t||angular.noop,r({url:this.uri,method:"GET"}).success(angular.bind(this,function(r){this.fromJson(r),n.apply(this,arguments)})).error(t),this},update:function(n,t){return n=n||angular.noop,t=t||angular.noop,r({url:this.uri,method:"PUT",data:this.toJson()}).success(n).error(t),this},remove:function(n,t){return n=n||angular.noop,t=t||angular.noop,r({url:this.uri,method:"DELETE"}).success(angular.bind(this,function(){this.uri=null,n.apply(this,arguments)})).error(t),this},search:function(n,t){n=n||angular.noop,t=t||angular.noop;var a=[];return r({url:this.getBaseUri(),method:"GET"}).success(angular.bind(this,function(r){for(var t=angular.fromJson(r),i=0;t.length>i;i+=1)a.push(this.type.fromJson(t[i]));n.apply(this,arguments)})).error(t),a},toJson:function(){return angular.toJson(this.toSerializable())},fromJson:function(r){this.fromSerializable(angular.fromJson(r))},toSerializable:function(){return{uri:this.uri}},fromSerializable:function(r){this.uri=r.uri},getBaseUri:function(){throw Error("not implemented")}},{fromJson:function(r){var n=new this;return n.fromJson(r),n},fromSerializable:function(r){var n=new this;return n.fromSerializable(r),n}})}]);